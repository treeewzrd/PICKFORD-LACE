{"ast":null,"code":"var _jsxFileName = \"C:\\\\bootcamp\\\\PICKFORD---LACE\\\\client\\\\src\\\\pages\\\\Cart\\\\index.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Container, Row, Col, ListGroup, Button, Card } from 'react-bootstrap';\nimport CartItem from '../../components/CartItem';\nimport Auth from '../../utils/auth';\nimport { useGlobalState, useGlobalDispatch } from '../../utils/GlobalState';\nimport { idbPromise } from '../../utils/helpers';\nimport './style.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Cart = () => {\n  _s();\n  // Replace useStoreContext with useGlobalState and useGlobalDispatch\n  const state = useGlobalState();\n  const dispatch = useGlobalDispatch();\n  useEffect(() => {\n    async function getCart() {\n      const cart = await idbPromise('cart', 'get');\n      dispatch({\n        type: 'ADD_MULTIPLE_TO_CART',\n        products: [...cart]\n      });\n    }\n    if (!state.cart.length) {\n      getCart();\n    }\n  }, [state.cart.length, dispatch]);\n  function calculateTotal() {\n    let sum = 0;\n    state.cart.forEach(item => {\n      sum += item.price * item.purchaseQuantity;\n    });\n    return sum.toFixed(2);\n  }\n  function submitCheckout() {\n    window.location.assign('/success');\n  }\n  if (!state.cartOpen) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-closed\",\n      onClick: () => dispatch({\n        type: 'TOGGLE_CART'\n      }),\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        role: \"img\",\n        \"aria-label\": \"cart\",\n        children: \"\\uD83D\\uDED2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Shopping Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), state.cart.length ? /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        md: 8,\n        children: /*#__PURE__*/_jsxDEV(ListGroup, {\n          variant: \"flush\",\n          children: state.cart.map(item => /*#__PURE__*/_jsxDEV(CartItem, {\n            item: item\n          }, item._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n              children: \"Order Summary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: [\"Total: $\", calculateTotal()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 17\n            }, this), Auth.loggedIn() ? /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              onClick: submitCheckout,\n              className: \"w-100\",\n              children: \"Checkout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/login\",\n              className: \"btn btn-primary w-100\",\n              children: \"Login to Checkout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"empty-cart\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Your cart is empty!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/products\",\n        className: \"btn btn-primary\",\n        children: \"Continue Shopping\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n_s(Cart, \"KQl04IpOZzow0Hlx8mK8s6C0Oks=\", false, function () {\n  return [useGlobalState, useGlobalDispatch];\n});\n_c = Cart;\nexport default Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["React","useEffect","Link","Container","Row","Col","ListGroup","Button","Card","CartItem","Auth","useGlobalState","useGlobalDispatch","idbPromise","jsxDEV","_jsxDEV","Cart","_s","state","dispatch","getCart","cart","type","products","length","calculateTotal","sum","forEach","item","price","purchaseQuantity","toFixed","submitCheckout","window","location","assign","cartOpen","className","onClick","children","role","fileName","_jsxFileName","lineNumber","columnNumber","md","variant","map","_id","Body","Title","Text","loggedIn","to","_c","$RefreshReg$"],"sources":["C:/bootcamp/PICKFORD---LACE/client/src/pages/Cart/index.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Container, Row, Col, ListGroup, Button, Card } from 'react-bootstrap';\r\nimport CartItem from '../../components/CartItem';\r\nimport Auth from '../../utils/auth';\r\nimport { useGlobalState, useGlobalDispatch } from '../../utils/GlobalState';\r\nimport { idbPromise } from '../../utils/helpers';\r\nimport './style.css';\r\n\r\nconst Cart = () => {\r\n  // Replace useStoreContext with useGlobalState and useGlobalDispatch\r\n  const state = useGlobalState();\r\n  const dispatch = useGlobalDispatch();\r\n\r\n  useEffect(() => {\r\n    async function getCart() {\r\n      const cart = await idbPromise('cart', 'get');\r\n      dispatch({ type: 'ADD_MULTIPLE_TO_CART', products: [...cart] });\r\n    }\r\n\r\n    if (!state.cart.length) {\r\n      getCart();\r\n    }\r\n  }, [state.cart.length, dispatch]);\r\n\r\n  function calculateTotal() {\r\n    let sum = 0;\r\n    state.cart.forEach((item) => {\r\n      sum += item.price * item.purchaseQuantity;\r\n    });\r\n    return sum.toFixed(2);\r\n  }\r\n\r\n  function submitCheckout() {\r\n    window.location.assign('/success');\r\n  }\r\n\r\n  if (!state.cartOpen) {\r\n    return (\r\n      <div className=\"cart-closed\" onClick={() => dispatch({ type: 'TOGGLE_CART' })}>\r\n        <span role=\"img\" aria-label=\"cart\">\r\n          ðŸ›’\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <h2>Shopping Cart</h2>\r\n      {state.cart.length ? (\r\n        <Row>\r\n          <Col md={8}>\r\n            <ListGroup variant=\"flush\">\r\n              {state.cart.map(item => (\r\n                <CartItem key={item._id} item={item} />\r\n              ))}\r\n            </ListGroup>\r\n          </Col>\r\n          <Col md={4}>\r\n            <Card>\r\n              <Card.Body>\r\n                <Card.Title>Order Summary</Card.Title>\r\n                <Card.Text>\r\n                  <strong>Total: ${calculateTotal()}</strong>\r\n                </Card.Text>\r\n                {Auth.loggedIn() ? (\r\n                  <Button \r\n                    variant=\"primary\" \r\n                    onClick={submitCheckout}\r\n                    className=\"w-100\"\r\n                  >\r\n                    Checkout\r\n                  </Button>\r\n                ) : (\r\n                  <Link to=\"/login\" className=\"btn btn-primary w-100\">\r\n                    Login to Checkout\r\n                  </Link>\r\n                )}\r\n              </Card.Body>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n      ) : (\r\n        <div className=\"empty-cart\">\r\n          <h3>Your cart is empty!</h3>\r\n          <Link to=\"/products\" className=\"btn btn-primary\">\r\n            Continue Shopping\r\n          </Link>\r\n        </div>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}