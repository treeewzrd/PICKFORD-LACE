{"ast":null,"code":"import React,{useEffect}from'react';import{useMutation}from'@apollo/client';import{ADD_ORDER}from'../utils/mutations';import{useStoreContext}from'../utils/GlobalState';import{CLEAR_CART}from'../utils/actions';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Success(){const[addOrder]=useMutation(ADD_ORDER);const[state,dispatch]=useStoreContext();useEffect(()=>{async function saveOrder(){const cart=state.cart;const products=cart.map(item=>item._id);if(products.length){const{data}=await addOrder({variables:{products}});const productData=data.addOrder.products;dispatch({type:CLEAR_CART});}}saveOrder();},[addOrder,state.cart,dispatch]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container my-1\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Success!\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Thank you for your purchase!\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"You will now be redirected to the home page\"})]});}export default Success;","map":{"version":3,"names":["React","useEffect","useMutation","ADD_ORDER","useStoreContext","CLEAR_CART","jsx","_jsx","jsxs","_jsxs","Success","addOrder","state","dispatch","saveOrder","cart","products","map","item","_id","length","data","variables","productData","type","className","children"],"sources":["C:/Bootcamp/mern-graphql-ecommerce/client/src/pages/Success.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useMutation } from '@apollo/client';\r\nimport { ADD_ORDER } from '../utils/mutations';\r\nimport { useStoreContext } from '../utils/GlobalState';\r\nimport { CLEAR_CART } from '../utils/actions';\r\n\r\nfunction Success() {\r\n  const [addOrder] = useMutation(ADD_ORDER);\r\n  const [state, dispatch] = useStoreContext();\r\n\r\n  useEffect(() => {\r\n    async function saveOrder() {\r\n      const cart = state.cart;\r\n      const products = cart.map(item => item._id);\r\n      \r\n      if (products.length) {\r\n        const { data } = await addOrder({ variables: { products } });\r\n        const productData = data.addOrder.products;\r\n\r\n        dispatch({\r\n          type: CLEAR_CART\r\n        });\r\n      }\r\n    }\r\n\r\n    saveOrder();\r\n  }, [addOrder, state.cart, dispatch]);\r\n  \r\n  return (\r\n    <div className=\"container my-1\">\r\n      <h1>Success!</h1>\r\n      <h2>Thank you for your purchase!</h2>\r\n      <h2>You will now be redirected to the home page</h2>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Success;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,WAAW,KAAQ,gBAAgB,CAC5C,OAASC,SAAS,KAAQ,oBAAoB,CAC9C,OAASC,eAAe,KAAQ,sBAAsB,CACtD,OAASC,UAAU,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9C,QAAS,CAAAC,OAAOA,CAAA,CAAG,CACjB,KAAM,CAACC,QAAQ,CAAC,CAAGT,WAAW,CAACC,SAAS,CAAC,CACzC,KAAM,CAACS,KAAK,CAAEC,QAAQ,CAAC,CAAGT,eAAe,CAAC,CAAC,CAE3CH,SAAS,CAAC,IAAM,CACd,cAAe,CAAAa,SAASA,CAAA,CAAG,CACzB,KAAM,CAAAC,IAAI,CAAGH,KAAK,CAACG,IAAI,CACvB,KAAM,CAAAC,QAAQ,CAAGD,IAAI,CAACE,GAAG,CAACC,IAAI,EAAIA,IAAI,CAACC,GAAG,CAAC,CAE3C,GAAIH,QAAQ,CAACI,MAAM,CAAE,CACnB,KAAM,CAAEC,IAAK,CAAC,CAAG,KAAM,CAAAV,QAAQ,CAAC,CAAEW,SAAS,CAAE,CAAEN,QAAS,CAAE,CAAC,CAAC,CAC5D,KAAM,CAAAO,WAAW,CAAGF,IAAI,CAACV,QAAQ,CAACK,QAAQ,CAE1CH,QAAQ,CAAC,CACPW,IAAI,CAAEnB,UACR,CAAC,CAAC,CACJ,CACF,CAEAS,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,CAACH,QAAQ,CAAEC,KAAK,CAACG,IAAI,CAAEF,QAAQ,CAAC,CAAC,CAEpC,mBACEJ,KAAA,QAAKgB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BnB,IAAA,OAAAmB,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjBnB,IAAA,OAAAmB,QAAA,CAAI,8BAA4B,CAAI,CAAC,cACrCnB,IAAA,OAAAmB,QAAA,CAAI,6CAA2C,CAAI,CAAC,EACjD,CAAC,CAEV,CAEA,cAAe,CAAAhB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}